
<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Social Automator{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <style>
        :root {
            --bg-color: #0d1117;
            --card-color: #161b22;
            --primary-color: #238636;
            --primary-hover: #2ea043;
            --text-color: #e6edf3;
            --text-muted: #7d8590;
            --border-color: #21262d;
            --input-bg: #010409;
            --success-color-rgb: 35, 134, 54;
            --error-color-rgb: 218, 54, 51;
        }

        [data-theme="light"] {
            --bg-color: #ffffff;
            --card-color: #f6f8fa;
            --primary-color: #2c974b;
            --primary-hover: #278842;
            --text-color: #1f2328;
            --text-muted: #57606a;
            --border-color: #d0d7de;
            --input-bg: #ffffff;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            transition: background-color 0.2s, color 0.2s;
        }

        .container {
            max-width: 1400px; margin: 0 auto; padding: 0 2rem;
        }
         @media (max-width: 768px) { .container { padding: 0 1rem; } }

        .app-header {
            background-color: var(--card-color);
            border-bottom: 1px solid var(--border-color);
            padding: 0.75rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .header-left, .header-right { display: flex; align-items: center; gap: 1.5rem; }
        .logo h1 { font-size: 1.25rem; font-weight: 700; margin: 0; color: var(--text-color); }
        
        .main-nav { display: none; }
        @media (min-width: 769px) { .main-nav { display: flex; } }
        .main-nav ul { margin: 0; padding: 0; list-style: none; display: flex; gap: 1rem; }
        .main-nav a { text-decoration: none; color: var(--text-muted); font-weight: 600; font-size: 0.9rem; padding: 0.5rem 0.75rem; border-radius: 6px; transition: all 0.2s; }
        .main-nav a:hover { color: var(--text-color); background-color: var(--border-color); }
        .main-nav a.active { color: var(--primary-color); }

        .hamburger-btn { display: none; background: none; border: none; padding: 0.5rem; color: var(--text-color); cursor: pointer; }
        @media (max-width: 768px) { .hamburger-btn { display: block; } }

        .sidebar { position: fixed; top: 0; left: 0; height: 100%; width: 280px; background: var(--card-color); border-right: 1px solid var(--border-color); transform: translateX(-100%); transition: transform 0.3s ease-in-out; z-index: 200; padding: 2rem 1rem; }
        .sidebar.open { transform: translateX(0); }
        .sidebar-nav ul { list-style: none; padding: 0; margin: 0; }
        .sidebar-nav a { display: block; padding: 1rem; text-decoration: none; color: var(--text-color); font-weight: 600; border-radius: 6px; }
        .sidebar-nav a:hover { background-color: var(--border-color); }
        .sidebar-nav a.active { background-color: var(--primary-color); color: white; }

        .sidebar-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 199; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
        .sidebar-overlay.open { opacity: 1; visibility: visible; }

        .theme-switch { background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 50px; width: 52px; height: 28px; cursor: pointer; position: relative; display: flex; align-items: center; }
        .theme-switch-toggle { position: absolute; width: 20px; height: 20px; background: var(--text-muted); border-radius: 50%; left: 3px; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; }
        .theme-switch-toggle svg { width: 14px; height: 14px; color: var(--card-color); position: absolute; }
        [data-theme="dark"] .theme-switch-toggle .sun { display: none; }
        [data-theme="light"] .theme-switch-toggle .moon { display: none; }
        #theme-toggle:checked ~ .theme-switch .theme-switch-toggle { transform: translateX(24px); background: var(--primary-color); }
        #theme-toggle { display: none; }

        .app-footer { text-align: center; padding: 3rem 0; margin-top: 3rem; border-top: 1px solid var(--border-color); color: var(--text-muted); font-size: 0.9rem; }
        .app-footer p { max-width: 600px; margin: 0 auto; }

        main.container { padding-top: 2rem; padding-bottom: 2rem; }

        h1, h2, h3 { font-weight: 600; color: var(--text-color); }
        .card { background-color: var(--card-color); border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border-color); }
        .btn { padding: 0.6rem 1.2rem; border: 1px solid var(--border-color); border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.9rem; text-decoration: none; display: inline-block; color: var(--text-color); background-color: var(--card-color); transition: all 0.2s; }
        .btn:hover { border-color: var(--text-muted); }
        .btn-primary { background-color: var(--primary-color); color: white; border-color: var(--primary-color); }
        .btn-primary:hover { background-color: var(--primary-hover); border-color: var(--primary-hover); }
        .form-group { margin-bottom: 1.25rem; }
        label { display: block; margin-bottom: 0.5rem; font-weight: 600; font-size: 0.9rem; }
        input[type="text"], textarea, .select-wrapper select { width: 100%; padding: 0.6rem 0.8rem; background-color: var(--input-bg); border: 1px solid var(--border-color); border-radius: 6px; color: var(--text-color); box-sizing: border-box; font-size: 0.9rem; transition: border-color 0.2s, box-shadow 0.2s; }
        input[type="text"]:focus, textarea:focus, .select-wrapper select:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(35, 134, 54, 0.3); }
        .select-wrapper { position: relative; display: inline-block; width: 100%; }
        .select-wrapper::after { content: 'â–¼'; position: absolute; top: 50%; right: 1rem; transform: translateY(-50%); font-size: 0.8rem; pointer-events: none; color: var(--text-muted); }
        .select-wrapper select { -webkit-appearance: none; -moz-appearance: none; appearance: none; cursor: pointer; }
        
        .btn { padding: 0.6rem 1.2rem; border: 1px solid var(--border-color); border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.9rem; text-decoration: none; display: inline-block; color: var(--text-color); background-color: var(--card-color); transition: all 0.2s; }
        .btn:hover { border-color: var(--text-muted); }
        .btn-primary { background-color: var(--primary-color); color: white; border-color: var(--primary-color); }
        .btn-primary:hover { background-color: var(--primary-hover); border-color: var(--primary-hover); }

        /* Process Panel */
        .process-panel { position: fixed; bottom: 1rem; right: 1rem; z-index: 2000; display: flex; flex-direction: column; gap: 1rem; max-width: 350px; }
        .process-card { background-color: var(--card-color); border: 1px solid var(--border-color); border-radius: 8px; padding: 1rem; box-shadow: 0 5px 15px rgba(0,0,0,0.2); display: flex; align-items: center; gap: 1rem; transform: translateX(calc(100% + 1rem)); transition: transform 0.4s ease-in-out; }
        .process-card.visible { transform: translateX(0); }
        .process-card .loader { flex-shrink: 0; width: 24px; height: 24px; border: 3px solid var(--border-color); border-top-color: var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite; }
        .process-card-content p { margin: 0; font-weight: 600; font-size: 0.9rem; }
        .process-card-content small { color: var(--text-muted); font-size: 0.8rem; }
        .process-card .close-btn { background: none; border: none; color: var(--text-muted); cursor: pointer; margin-left: auto; padding: 0; font-size: 1.5rem; line-height: 1; }
        .process-card .icon { width: 24px; height: 24px; flex-shrink: 0; }
        .process-card .icon.success { color: var(--primary-color); }
        .process-card .icon.error { color: var(--error-color-rgb, 218, 54, 51); }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <header class="app-header"> <!-- ... header content ... --> </header>
    <div class="sidebar" id="sidebar"> <!-- ... sidebar content ... --> </div>
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <main class="container">
        {% block content %}{% endblock %}
    </main>

    <footer class="app-footer"> <!-- ... footer content ... --> </footer>

    <div class="process-panel" id="process-panel"></div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        const ProcessManager = {
            panel: null,
            init: function() {
                this.panel = document.getElementById('process-panel');
            },
            create: function(title) {
                const id = 'process-' + Date.now();
                const card = document.createElement('div');
                card.id = id;
                card.className = 'process-card';
                card.innerHTML = `
                    <div class="loader"></div>
                    <div class="process-card-content">
                        <p>${title}</p>
                        <small>Uploading, please wait...</small>
                    </div>
                    <button class="close-btn" style="display: none;">&times;</button>
                `;
                this.panel.appendChild(card);
                setTimeout(() => card.classList.add('visible'), 50);
                return id;
            },
            update: function(id, message, isSuccess) {
                const card = document.getElementById(id);
                if (!card) return;
                const icon = isSuccess ? '<svg class="icon success" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>'
                                     : '<svg class="icon error" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>';
                card.querySelector('.loader').replaceWith(document.createRange().createContextualFragment(icon));
                card.querySelector('small').textContent = message;
                const closeBtn = card.querySelector('.close-btn');
                closeBtn.style.display = 'block';
                closeBtn.onclick = () => this.remove(id);
                setTimeout(() => this.remove(id), 7000);
            },
            remove: function(id) {
                const card = document.getElementById(id);
                if (!card) return;
                card.classList.remove('visible');
                card.addEventListener('transitionend', () => card.remove());
            }
        };

        document.addEventListener('DOMContentLoaded', function () {
            ProcessManager.init();

            // Theme switcher logic
            const themeToggle = document.getElementById('theme-toggle');
            const htmlEl = document.documentElement;
            function setTheme(theme) {
                htmlEl.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
                if (themeToggle) {
                    themeToggle.checked = theme === 'light';
                }
            }
            const currentTheme = localStorage.getItem('theme') || 'dark';
            setTheme(currentTheme);
            themeToggle.addEventListener('change', function(e) {
                setTheme(e.target.checked ? 'light' : 'dark');
            });

            // Sidebar logic
            const hamburgerBtn = document.getElementById('hamburger-btn');
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            hamburgerBtn.addEventListener('click', () => {
                sidebar.classList.add('open');
                overlay.classList.add('open');
            });
            overlay.addEventListener('click', () => {
                sidebar.classList.remove('open');
                overlay.classList.remove('open');
            });
        });
    </script>
    {% block scripts %}{% endblock %}
</body>
</html>
